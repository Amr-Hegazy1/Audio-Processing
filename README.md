
## Signals and Systems Theory

## Team Members:
<a href="https://github.com/Omar-Orensa"><img src="https://avatars.githubusercontent.com/u/131605903?v=4" style="width:20%;"/></a>
<a href="https://github.com/Amr-Hegazy1"><img src="https://avatars.githubusercontent.com/u/68474553?v=4" style="width:20%;"/></a>

## (COMM 401 )

## Lab Project (PIANO)

## Audio Processing



# Project Description

- This project is classified into 2 milestones:
Milestone 1 :You are the PIANIST,you should mix and match frequencies to
generate your own song.

Milestone 2 :Noise Cancellation and Frequency Domain (will be posted
later after the midterms).




# Background

- Single tone generation:
Each pressed piano key/note number ğ‘–, corresponds to a single tone with
frequency ğ‘“ğ‘– generated for a certain period of timeğ‘‡ğ‘–starting from time ğ‘¡ğ‘– over a
defined time range ğ‘¡.

```
ğ‘¥ğ‘– ğ‘¡ = sin 2 ğœ‹ğ‘“ğ‘–ğ‘¡ [ğ‘¢(ğ‘¡âˆ’ğ‘¡ğ‘–)âˆ’ğ‘¢(ğ‘¡âˆ’ğ‘¡ğ‘–âˆ’ğ‘‡ğ‘–)]
```
Where the unit step functions defines the playing interval.

Example: Assume that we started pressing the middle Ckey (ğ‘“ 1 = 261. 63 ğ»ğ‘§),
at time ğ‘¡ 1 = 0 for a duration of ğ‘‡ 1 = 1. 5 seconds, the resultant signal is:

```
ğ‘¥ 1 ğ‘¡ = sin 2 âˆ— 261. 63 ğœ‹ğ‘¡ [ğ‘¢(ğ‘¡)âˆ’ğ‘¢(ğ‘¡âˆ’ 0. 5 )]
```
```
0 1.5 3
```
```
ğ‘¥ 1 ğ‘¡
```

# Milestone 1 : The Pianist

- Signal/Song Generation:
Generate your own signal using ğ‘ pairs of notes chosen from the 3 rdand
4 thpiano octaves assuming that you are playing will both hands at the same
time ( 3 rdoctave with the left hand/ 4 thoctave with right hand),

Each piano key/note frequency is given below. Your final song could be
generated as follows,

```
ğ‘¥ ğ‘¡ = à·
ğ‘–= 1
```
```
ğ‘
[sin 2 ğœ‹Ïœğ‘–ğ‘¡ +sin 2 ğœ‹ğ‘“ğ‘–ğ‘¡ ][ğ‘¢(ğ‘¡âˆ’ğ‘¡ğ‘–)âˆ’ğ‘¢(ğ‘¡âˆ’ğ‘¡ğ‘–âˆ’ğ‘‡ğ‘–)]
```
```
Chosen from the 3 rdoctave Chosen from the 4 thoctave
```

# Milestone 1 : The Pianist

```
1 ) You will need to import the following libraries.
import numpy as np
import matplotlib.pyplot as plt
import sounddevice as sd
```
```
2 ) Set the total song playing time to 3 seconds starting from 0 for 12 Ã— 1024
samples.
ğ‘¡ =np.linspace( 0 , 3 , 12 âˆ— 1024 )
```
```
3 ) Customize your own song by setting the number of pairs of notes ğ‘.For
each pair number ğ‘–, set the left hand frequency Ïœğ‘–, right hand frequency ğ‘“ğ‘–,
the pressing starting time ğ‘¡ğ‘–, and how long you will press both keys ğ‘‡ğ‘–.
N.B you can freely customize these values to play the song you want.
If you want to play with one hand only, you can set the frequency of the other hand to 0.
```
- Procedure:


# Milestone 1 : The Pianist

```
4 ) Define your signal/song using the previous parameters:
```
```
5 ) Plot your signal/song in the time domain your output will look similar to
the following: plt.plot(t, x)
```
```
NB. The time separation between the notes will vary from one group to another according to your
song. We also canâ€™t notice the variations in the sinusoidal tones due to the high frequencies.
```
```
6 ) Finally:Play your song using:
sd.play(x, 3 âˆ— 1024 )
```


## Lab Project (PIANO)-Milestone 2

## Noise Cancelation

Faculty of Information Engineering and Technology
Department of Communication Engineering


# Background

- Noise generation:
Assume that additional noise is generated by a child who kept pressing the
same 2 random piano keys during your song playing interval such that the
noise is represented as follows,

Where, ğ‘“ğ‘› 1 and ğ‘“ğ‘› 2 are two frequencies selected randomly from the 3rdand 4th

octaves frequencies list respectively. Your final song after the noise becomes,

#### ğ‘¥ğ‘› ğ‘¡ =ğ‘¥ ğ‘¡ +ğ‘›(ğ‘¡)

Goal: Noise Cancelation: using frequency domain conversion

```
ğ‘› ğ‘¡ =sin 2 ğ‘“ğ‘› 1 ğœ‹ğ‘¡ +sin 2 ğ‘“ğ‘› 2 ğœ‹ğ‘¡
```

# Milestone 2: Frequency Conversion

```
0) You will need to add this line at the beginning of your code:
```
```
from scipy.fftpackimport fft
```
```
1) Set the number of samples ğ‘ to ğ‘¦ğ‘œğ‘¢ğ‘Ÿ_ğ‘ ğ‘œğ‘›ğ‘”_ğ‘‘ğ‘¢ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œğ‘›x 1024. Then set
the frequency axis range to,
```
```
ğ‘ = 3 x 1024
ğ‘“= np.linspace( 0 , 512 ,int(ğ‘/ 2 ))
```
```
2) Convert the time signal ğ‘¥(ğ‘¡)to the frequency signal ğ‘‹(ğ‘“) from,
```
### x_f = fft(x)

### x_f = 2/N * np.abs(x_f[0:np.int(N/2)])

```
Your final output will look as following,
```
- Procedure:


# Milestone 2: Noise Generation

- Procedure:

```
3) Generate the noise signal as described in slide 3 where the two random
frequencies are selected as follows,
```
### ğ‘“ğ‘› 1 & ğ‘“ğ‘› 2 = np.random.randint( 0 , 512 , 2 )

```
Hint: Each time you run the code you will get different noise.
```
```
4) Add the generated noise ğ‘›(ğ‘¡) to the signal ğ‘¥ ğ‘¡ ,
ğ‘¥ğ‘› ğ‘¡ = ğ‘¥ ğ‘¡ +ğ‘›(ğ‘¡)
```
```
Hint: Play the new signal to notice the noise effect on the sound.
```
```
5) Convert the noise contaminated signal ğ‘¥ğ‘› ğ‘¡ to the signal ğ‘‹ğ‘› ğ‘“ in
frequency domain, it looks as follows,
```
```
Hint: You will notice that the signal contains two very high frequency peaks
```

# Milestone 2: Noise Cancelation

- Procedure:
    6) Find the two random noise frequencies:by finding the frequency indices
       that corresponds to the peaks of the signal ğ‘‹ğ‘› ğ‘“ which is higher than
       the maximum peak of the original signal ğ‘‹ ğ‘“ without noise rounded to
       the next integer (to avoid including the maximum value due to double precision errors).

```
7) Round the frequency values at that indices in ğ‘“ to get ğ‘“áˆ˜ğ‘› 1 and ğ‘“áˆ˜ğ‘› 2 (since
we generate random integer values of frequencies)
```
```
8) Filter the noise by subtracting two tones with the two found frequencies
```
```
ğ‘¥ğ‘“ğ‘–ğ‘™ğ‘¡ğ‘’ğ‘Ÿğ‘’ğ‘‘ ğ‘¡ =ğ‘¥ğ‘› ğ‘¡ âˆ’[sin 2 ğ‘“ğ‘› 1 ğœ‹ğ‘¡ +sin 2 ğ‘“ğ‘› 2 ğœ‹ğ‘¡ ]
```
```
9) Play the filtered signal to make sure that you get the same original sound
without noise
sd.play(ğ‘¥ğ‘“ğ‘–ğ‘™ğ‘¡ğ‘’ğ‘Ÿğ‘’ğ‘‘, 4 âˆ— 1024 )
```


